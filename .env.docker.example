# ============================================================================
# AWS CREDENTIALS (REQUIRED)
# ============================================================================
# Create IAM user with S3 read/write permissions to github-api0-upload bucket
# Never commit this file! Copy to .env.docker and add your credentials.

AWS_ACCESS_KEY_ID=your_access_key_id_here
AWS_SECRET_ACCESS_KEY=your_secret_access_key_here

# ============================================================================
# AWS S3 CONFIGURATION
# ============================================================================
AWS_S3_BUCKET=github-api0-upload
AWS_REGION=us-east-2

# Enable S3 folder partitioning: yyyy/mm/dd/ structure (true/false)
S3_USE_DATE_PARTITIONING=true

# ============================================================================
# GITHUB API CONFIGURATION
# ============================================================================
# Optional: Leave empty for unauthenticated access (60 requests/hour)
# With token: Up to 5000 requests/hour
# Get token: GitHub Settings → Developer settings → Personal access tokens
GITHUB_TOKEN=

# Maximum API requests per run
# - Without token: 60 (results in 59 repos)
# - With token: 5000 (results in 4999 repos)
MAX_REQUESTS_PER_RUN=60

# ============================================================================
# STATE TRACKING (RESUME CAPABILITY)
# ============================================================================
# Storage method for tracking last processed repo ID
# Options: file, env, s3, dynamo
# IMPORTANT: Use 's3' for Docker (portable, no local files)
SINCE_STORAGE_METHOD=s3

# S3 state location: s3://${AWS_S3_BUCKET}/github_extraction_state/last_repo_id.txt
# Before first run, upload current state:
#   echo "211" | aws s3 cp - s3://github-api0-upload/github_extraction_state/last_repo_id.txt

# ============================================================================
# CACHE SETTINGS
# ============================================================================
# Cache enables incremental loading and prevents re-fetching
USE_CACHE=true
CACHE_DIR=/app/cache

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
LOG_DIR=/app/logs

# ============================================================================
# SECURITY NOTES
# ============================================================================
# 1. NEVER commit .env.docker to git (it's in .gitignore)
# 2. Use IAM user with minimal permissions (S3 only)
# 3. Rotate credentials every 90 days
# 4. For production, consider AWS Secrets Manager or Docker secrets
# 5. Review IAM policies regularly
